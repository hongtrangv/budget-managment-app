/*!
 * chartjs-plugin-datalabels v2.2.0
 * https://chartjs-plugin-datalabels.netlify.app
 * (c) 2022 chartjs-plugin-datalabels contributors
 * Released under the MIT license
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("chart.js/helpers")):(t=t||self).ChartDataLabels=e(t.Chart.helpers)}(this,(function(t){"use strict";var e={id:"datalabels",defaults:{align:"center",anchor:"center",backgroundColor:null,borderColor:null,borderRadius:0,borderWidth:0,clamp:!1,clip:!1,color:void 0,display:!0,font:{family:void 0,lineHeight:1.2,size:void 0,style:void 0,weight:null},labels:void 0,listeners:{},offset:4,opacity:1,padding:4,rotation:0,textAlign:"start",textStrokeColor:void 0,textStrokeWidth:0,textShadowBlur:0,textShadowColor:void 0},descriptors:{_scriptable:!0,_indexable:!1,_allLayered:!0},forwarders:{helpers:"helpers",labels:"labels"},beforeInit:function(t){e.forwarders.helpers=new i(t)},beforeUpdate:function(t){e.forwarders.labels.init(t)},reset:function(t){e.forwarders.helpers.init(),e.forwarders.labels.destroy()},afterDraw:function(t){e.forwarders.labels.draw(t)},afterEvent:function(t,a){e.forwarders.labels.handleEvent(t,a.event)}};function r(t,e,a){var r=e.getProps(["x","y"],a);return{x:r.x,y:r.y,width:e.width,height:e.height}}function o(t,e,a){var r=t.getProps(["x","y"],a);return{x:r.x,y:r.y,base:t.base,width:t.width,height:t.height}}function n(t,e,a){var r,o,n,i,l={x:t.x,y:t.y,width:t.width,height:t.height};return t.horizontal?(n=l.width/2,r=l.x+n,o=l.y+l.height/2,i={x:t.base,y:o,width:l.width,height:0}):(n=l.height/2,o=l.y+n,r=l.x+l.width/2,i={x:r,y:t.base,width:0,height:l.height}),e.circumference>=Math.PI&&t.options.circumference>=Math.PI||(r=i.x,o=i.y),{x:r,y:o,width:l.width,height:l.height}}function i(e){var a=t.helpers,r={};function o(t,e){return a.merge({},[t,e])}return{init:function(){var t=e.options.plugins.datalabels;r=o(e.options.plugins.datalabels,e.config.options.plugins.datalabels),r.font=o(r.font,e.config.options.font)},get:function(t){return a.resolve([r,t],void 0,void 0)},list:function(e){var r,o,n=[];for(r=0,o=t.elements.length;r<o;++r)n.push(this.get(t.getDatasetMeta(r).controller.getLabelAndValue(r).label));return n}}}var l=function(){this._rect=null,this._rotation=0};function s(t,e){for(var a,r=e.length,o=0;o<r;++o)if(a=e[o],void 0!==a)return a;return t}function d(t,e,a){var r=s(e.font.size,a.font.size);return"string"==typeof r&&(r=parseFloat(r)),r*e.font.lineHeight||e.font.size}function c(t,e,a){var r=s(e.padding,a.padding);return"number"==typeof r?{top:r,right:r,bottom:r,left:r}:"object"==typeof r?{top:r.top||0,right:r.right||0,bottom:r.bottom||0,left:r.left||0}:{top:0,right:0,bottom:0,left:0}}function u(t,e,a){return Math.max(0,t/2-e-a)}function f(t,e,a){var r,o;return t.slice?t.slice(e,a):(r=t.get(e),o=t.get(a),""+r+o)}function h(t){var e,a,r=t.get("value"),o=t.get("label");return"object"==typeof r?(e=f(r,0,1),a=f(r,1,2)):(e=r,a=o),{label:a,value:e}}function g(t,e,a){if(t&&"function"==typeof t){var r={};return r[e]=a,t(r)}return t}function b(t,e){if(t&&"object"==typeof t){var a,r=g(t.formatter,e,t.value);return"object"==typeof r?(a=r.value,r.label):a=r,new x(t.label,a)}}function p(t,e){var a,r,o=t.chart.getDatasetMeta(e.datasetIndex).controller,n=t.chart.options,i=o.getLabelAndValue(e.dataIndex);return"object"==typeof i.value?r=i.value[0]:r=i.value,n.plugins.datalabels.labels?a=g(n.plugins.datalabels.labels[i.label],"value",r):a=r,b(t,a)}function m(e,a){a=a||{};var r=e.getContext("2d");return r.font=function(t){var e=t.family,a=t.size,r=t.style,o=t.weight;return[r,o,a+"px",e].join(" ")}(a.font),{lines:function(e,a){var r,o=[],n=e.split("\n");if(n.length>1)for(r=0;r<n.length;++r)o.push({value:n[r],width:a.measureText(n[r]).width});else o.push({value:e,width:a.measureText(e).width});return o}(e,r),font:a.font,color:a.color,stroke:a.textStrokeColor,strokeWidth:a.textStrokeWidth,shadowBlur:a.textShadowBlur,shadowColor:a.textShadowColor}}function v(t,e,a){var r=m(t,a);return{lines:r.lines,width:function(t){for(var e,a=0,r=0;r<t.length;++r)e=t[r].width,a<e&&(a=e);return a}(r.lines),height:r.lines.length*a.font.lineHeight,font:a.font,color:a.color,stroke:a.stroke,strokeWidth:a.strokeWidth,shadowBlur:a.shadowBlur,shadowColor:a.shadowColor}}function x(t,e){this.label=t,this.value=e}l.prototype={acquireContext:function(t,e,a){this.ctx=t,this.options=e,this.listeners=e.listeners,this.index=a},update:function(t,e){var a,r=this;r._config=p(r,t),r._model=function(t,e){var a={};return a.font=d(t,e),a.padding=c(t,e),a}(e,r._config),a=r._model.padding,r._rect=new t.Rectangle({x:e.x-a.left,y:e.y-a.top,width:e.width+a.left+a.right,height:e.height+a.top+a.bottom})},draw:function(t){var e=this.ctx,a=this.options;if(a.display){var r=v(this.value,t,a);this._drawBox(r,a),this._drawText(r,a)}},_drawBox:function(t,e){var a=this.ctx,r=this._rect,o=this.options.rotation;a.save(),a.translate(r.x,r.y),a.rotate(o*Math.PI/180),a.fillStyle=e.backgroundColor,a.strokeStyle=e.borderColor,a.lineWidth=e.borderWidth,a.shadowBlur=t.shadowBlur,a.shadowColor=t.shadowColor,a.strokeRect(0,0,r.width,r.height),a.fillRect(0,0,r.width,r.height),a.restore()},_drawText:function(t,e){var a=this.ctx,r=this._rect,o=t.lines,n=t.font,i=t.color,l=t.stroke,s=t.strokeWidth,d=this.options.rotation,c=this.options.textAlign;a.save(),a.translate(r.x,r.y),a.rotate(d*Math.PI/180),a.font=n,a.fillStyle=i,a.strokeStyle=l,a.lineWidth=s,a.textAlign=c,a.textBaseline="middle";var u=r.height,f=u/2,h=r.width,g=h/2;a.shadowBlur=t.shadowBlur,a.shadowColor=t.shadowColor,o.forEach((function(t,r){var o=r*n.lineHeight,n=u/2-o;"center"===c?a.strokeText(t.value,g,n):"left"===c?a.strokeText(t.value,0,n):"right"===c&&a.strokeText(t.value,h,n),"center"===c?a.fillText(t.value,g,n):"left"===c?a.fillText(t.value,0,n):"right"===c&&a.fillText(t.value,h,n)})),a.restore()}},x.prototype.update=function(t,e){this.x=t.x,this.y=t.y,this.rotation=e.rotation,this.value=e.value,this.font=e.font,this.color=e.color,this.stroke=e.stroke,this.strokeWidth=e.strokeWidth,this.shadowBlur=e.shadowBlur,this.shadowColor=e.shadowColor},x.prototype.draw=function(t){var e=t.getContext("2d"),a=this.lines,r=this.font,o=this.color,n=this.stroke,i=this.strokeWidth,l=this.shadowBlur,s=this.shadowColor,d=t.width,c=t.height;e.save(),e.translate(this.x,this.y),e.rotate(this.rotation*Math.PI/180),e.font=r,e.fillStyle=o,e.strokeStyle=n,e.lineWidth=i,e.shadowBlur=l,e.shadowColor=s,a.forEach((function(t,r){var o=r*this.font.size*this.font.lineHeight,n=this.height/2-o;e.strokeText(t.value,0,n),e.fillText(t.value,0,n),e.strokeText(t.value,d,n),e.fillText(t.value,d,n)})),e.restore()};var y={bar:r,polarArea:function(t,e,a){var r,o,n=t.getProps(["x","y"],a),i={x:n.x,y:n.y,width:t.outerRadius-t.innerRadius,height:t.outerRadius-t.innerRadius};if(e.circumference>=Math.PI)r=i.width/2,o=i.height/2;else{var l=t.startAngle,s=t.endAngle,d=(l+s)/2;r=Math.cos(d)*t.outerRadius,o=Math.sin(d)*t.outerRadius}return{x:i.x+r,y:i.y+o,width:i.width,height:i.height}},pie:n,doughnut:n,line:function(t,e,a){return r(t,e,a)},radar:function(t,e,a){return r(t,e,a)},bubble:function(t,e,a){return r(t,e,a)},scatter:function(t,e,a){return r(t,e,a)}};function _(t,e,a){var r=a.anchor,o=a.align,n=a.offset,i=a.rotation;t.x+=n*Math.cos(i*Math.PI/180),t.y+=n*Math.sin(i*Math.PI/180);var l=t.width,s=t.height;"center"===r?("start"===o?t.x-=l/2:"end"===o&&(t.x+=l/2),"start"===o?t.y-=s/2:"end"===o&&(t.y+=s/2)):("start"===r?t.x-=l/2:"end"===r&&(t.x+=l/2),"start"===r?t.y-=s/2:"end"===r&&(t.y+=s/2))}return e.version="2.2.0",e.defaults=t.defaults,e.descriptors=t.descriptors,Object.freeze(e)}));
